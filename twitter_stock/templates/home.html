{% load static from staticfiles %}

<html lang="en-US">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="{% static 'css/home.css' %}" />

        <title>APP NAME | Home Page</title>
    </head>

    <body>
        <!-- LOAD SCREEN -->
        <div id="load-screen"></div>

        <!-- NAVIGATION -->
        <div id="nav">APP NAME</div>

        <!-- MAIN -->
        <div id="main">
            <!-- heading -->
            <p id="main-heading">Sentiment for the most-followed stocks.</p>

            <!-- search form -->
            <form id="search-form" action="/stock_sentiment/" method="get">
                <!-- symbol dropdown menu -->
                <div class="search-form-child">
                    <label>
                        <span>Symbol:</span>
                        <select id="ticker-dropdown" tabindex="1"></select>
                    </label>
                </div>

                <!-- search button -->
                <div class="search-form-child">
                    <button id="search-form-button"name="submit" type="submit">Search</button>
                </div>
            </form>

            <!-- home page art -->
            <img id="main-img" alt="Sentiment Tesseract" src="{% static 'img/sentiment_tesseract.png' %}" />
        </div><!-- /main -->


        <!-- SCRIPTS -->
        <script>
            'use strict';

            (function() {

                //local vars
                var sorted_symbols = {{ symbols|safe }}.sort(),
                    dropdown_menu  = document.getElementById("ticker-dropdown"),
                    search_button  = document.getElementById("search-form-button");

                //populate dropdown menu
                for(var i=0; i<sorted_symbols.length; i++) {

                    //loop vars
                    var ticker = sorted_symbols[i],
                        option = document.createElement("option");

                    option.textContent = ticker;
                    dropdown_menu.appendChild(option);
                }

                //use session storage to persist dropdown menu value
                search_button.onclick = function() { sessionStorage.SYMBOL = dropdown_menu.value }
            }());
        </script>

        <!-- remove load screen once site has fully loaded -->
        <script>window.onload = function() { document.getElementById("load-screen").style.display = "none" }</script>
    </body>
</html>
